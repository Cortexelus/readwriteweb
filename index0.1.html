<html>
	<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script>
$(function(){

	$("li").attr("contenteditable","false");
	$("ul").attr("contenteditable","true");
	$("li").wrapInner("<span class='entry' contenteditable='true'></span>")
/*
	$("ul").keydown(function(event){
		console.log(event.currentTarget);
		if(event.keyCode==9){
			event.preventDefault();	
			// find cursor
			
			var new_li = "<ul><li></li></ul>"

			$(this).wrap(new_li)
			// insert html at cursor
			
		}
	})*/


	$(document).on( 'keydown', '.entry', function(event){
		console.log("child", event.currentTarget);
		if(event.keyCode==9){
			event.preventDefault();	
			// find cursor
			
			/*var new_li = "<ul><li></li></ul>"
			$(this).wrap("<div></div>")
			$(this).append(new_li)*/

			$(this).parent().prev().append($(this).parent())
			// insert html at cursor
			
		}
		event.stopPropagation();
	})

});
</script>
	</head>
	<body>
		<textarea></textarea>
		<input type="submit" value="Add new">
		<ul >

			<li>Jacob's Homepage</li>
			<li>CJ's Homepage</li>
			<li><div>Semon's Homepage<div>
				<ul>
				<li>Synthetic bio</li>
				</ul>
			</li>
			<li><a href="scott.htm">Scott Aaronson's Homepage</a></li>
			<li>Ben Koo's Homepage</li>

		</ul>
	</body>
</html>